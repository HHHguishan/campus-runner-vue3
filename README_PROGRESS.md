# 校园配送管理系统 - 前端项目进展报告

## 📅 更新日期：2026-01-08

## 🛠 技术栈
- **核心框架**: Vue 3 (Composition API)
- **构建工具**: Vite
- **UI 组件库**: Element Plus (暗黑/磨砂玻璃风格)
- **状态管理**: Pinia
- **路由管理**: Vue Router 4
- **网络请求**: Axios (已封装请求/响应拦截器)
- **动画效果**: GSAP (用于登录页及控制台动效)

---

## 🚀 已完成功能模块

### 1. 基础架构
- [x] **全局鉴权**: 路由守卫拦截未登录请求。
- [x] **网络封装**: `src/utils/request.js` 支持自动携带 Token 和统一错误提示。
- [x] **响应式布局**: 基于 Element Plus 的侧边栏导航布局，支持页面切换过渡动画。
- [x] **视觉风格**: 全局暗色调设计，采用 Glassmorphism（磨砂玻璃）UI 风格。

### 2. 登录与安全 (已对接后端)
- [x] **管理员登录**: 动态背景与 GSAP 入场动画。
- [x] **Token 校验**: 登录成功后本地存储 Token，并支持退出登录。
- [x] **接口**: `POST /api/auth/login/admin`

### 3. 骑手管理
- [x] **身份审核 (已对接后端)**: 
  - 支持查看待审核骑手列表。
  - 支持证件图片 (ID Card) 弹出层预览。
  - 接口: `GET /api/admin/runner/pending`
- [x] **审核操作 (已对接后端)**:
  - 通过申请 (`POST /api/admin/runner/approve`)。
  - 驳回申请（支持输入驳回原因）(`POST /api/admin/runner/reject`)。
- [x] **AI 拦截日志 (前端 Mock)**:
  - 展示 AI 自动拦截的违规记录（如人脸不符）。
  - 支持拦截详情与证据图片查看。

### 4. 订单监管 (前端 Mock)
- [x] **监管中心**: 
  - 订单分类展示（异常、进行中、历史订单）。
  - **异常干预**: 管理员可手动干预/取消异常订单。
  - **详情抽屉**: 侧边展示订单详细取送地址及异常备注。

### 5. 财务管理 (已对接后端)
- [x] **提现管理**: 
  - **接口适配**: 对接后端 `GET /api/admin/withdraw/list` (列表) 和 `POST /api/admin/withdraw/audit` (审核)。
  - **审核流程**: 支持通过/驳回操作，驳回时强制要求输入原因。
  - **状态映射**: 正确展示审核中/已打款/已驳回等状态标签。

### 6. 数据看板 (UI 已完成 / 数据 Mock)
- [x] **可视化图表**: 引入 **ECharts** 实现多维度数据展示。
- [x] **交互设计**: 
  - 顶部统计卡片支持数字滚动与 GSAP 入场动画。
  - **趋势图**: 近七日订单量折线图。
  - **分布图**: 订单状态饼图。
  - **热点图**: 热门配送区域柱状图。
  - **时段分析**: 混合图表展示高峰时段与平均耗时。
- [x] **响应式**: 图表支持窗口缩放自适应。

### 7. 系统设置 (已对接后端)
- [x] **参数设置**: 
  - **接口适配**: 对接后端 `GET /api/admin/config/list` (查询) 和 `PUT /api/admin/config/update` (修改)。
  - **批量保存优化**: 实现了将前端表单拆分为多个单项请求并行提交，适配后端逐条更新的接口设计。
  - **数据回显**: 自动映射后端下划线 (`base_price`) 字段到前端驼峰模型，确保回显正常。
- [x] **公告与轮播管理**:
  - **全量 CRUD**: 对接了公告的分页查询、创建、更新、删除及状态启停接口。
  - **图片上传**: 新增 `src/api/common.js`，实现本地图片上传至服务器 (`/api/common/upload`)，替代了原有的 URL 文本输入。
  - **校验修复**: 修正了轮播图类型提交时校验失败的问题，确保内容字段必填。

---

## 📂 项目结构更新
```text
src/
├── api/             
│   ├── common.js    # [新增] 通用接口 (文件上传)
│   ├── finance.js   # [新增] 财务模块接口
│   ├── system.js    # [更新] 系统模块接口 (配置、公告、公开接口)
│   └── ...
├── views/
│   └── dashboard/   # [更新] 引入 ECharts 图表组件
```

---

## 🚧 下一步计划
1.  **订单模块对接**: 将订单监管中心的 Mock 数据替换为真实 API (`/api/order/list`, `/api/order/cancel` 等)。
2.  **看板数据对接**: 将 Dashboard 的 ECharts 图表数据替换为后端真实统计接口 (`/api/admin/statistics` 等)。
3.  **评价系统管理**: 新增评价管理页面，支持管理员查看与删除违规评价。
